<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <title>Document</title>
   <style media="screen">
      *{
         margin: 0;
      }
      canvas{
         display: block;
      }
   </style>
</head>
<body>
   <canvas id="scene"></canvas>
   <script type="text/javascript">
      const e = sel => document.querySelector(sel)
      const es = sel => document.querySelectorAll(sel)
      const log = console.log.bind(console)

      class CanvasNode {
         constructor(canvas) {
            this.cvs = canvas
            this.ctx = canvas.getContext("2d")
            this.w = this.getW()
         }
         getW() {
            return this.cvs.width
         }
         getH() {
            return this.cvs.height
         }
         setW(w) {
            this.cvs.width = w
         }
         setH(h) {
            this.cvs.height = h
         }
      }
      class Scene extends CanvasNode {
         constructor(canvas) {
            super(canvas)
            this.ele = []
            this.update()
         }
         add(ele) {
            ele.cvs = this.cvs
            ele.ctx = this.ctx
            this.ele.push(ele)
         }
         remove(i) {
            this.ele.splice(i,1)
         }
         update() {
            this.ele.forEach((item,index) => {
               item.update()
               if(item.exist) {
                  this.remove(index)
               }
            })
            requestAnimationFrame(() => {
               this.update()
            })
         }
      }
      class BezierCircle {
         /*
            des{
               x:
               y:
            }
         */
         constructor(des) {
            Object.keys(des).forEach(key => {
               this[key] = des[key]
            })
            this.key
            window.addEventListener("keydown", event => {

            })
            window.addEventListener("keyup", event => {

            })
         }
         update() {
            this.arc(this.x, this.y, this.r, this.color)
         }
         arc(x, y, r, color) {
            this.ctx.beginPath()
            this.ctx.arc(x, y, r, 0, Math.PI * 2)
            this.ctx.fillStyle = color
            this.ctx.fill()
            this.ctx.closePath()
         }
      }

      init()

      window.scene = new Scene(e("#scene"))
      scene.add(new BezierCircle({
         x: 100,
         y: 100,
         r: 100,
         color: "red",
         exist: true,
      }))

      function init() {
         e("#scene").width = window.innerWidth
         e("#scene").height = window.innerHeight
         window.addEventListener("resize", event => {
            e("#scene").width = window.innerWidth
            e("#scene").height = window.innerHeight
         })
      }
   </script>
</body>
</html>
