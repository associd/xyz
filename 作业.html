<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <title>Document</title>
   <style media="screen">
      :root{
         --text-color: #000000;
         color: var(--text-color);
         font-size: 24px;
         text-align: center;
         background-color: white;
      }
      a{
         text-decoration: inherit;
         color: inherit;
      }
      p{
         padding: 10px 15px;
      }
      section{
         margin: 2em 15px;
      }
      .imgbox{
         width: 100%;
      }
      .imgbox img{
         width: 100%;
         max-width: 1203px;
         height: auto;
      }
      .imgbox .effect{
         max-width: 300px;
      }
      .code a{
         display: block;
         padding: 10px 15px;
      }

      #canvas{
         position: fixed;
         z-index: -1;
         left: 0;
         top: 0;
      }
   </style>
</head>
<body>
   <header>
      <h1>作业</h1>
      <canvas id="canvas"></canvas>
   </header>
   <main>
      <section>
         <p>请按照如下设计图进行页面部分的制作, 图片素材请使用任意图片代替</p>
         <div class="imgbox">
            <img src="img/design.png" alt="">
         </div>
      </section>
      <section>
         <p><strong>拓展:</strong> 如果可能的话, 页面含有动态效果, 请根据如图所示的效果进行制作</p>
         <div class="imgbox">
            <img class="effect" src="img/effect.gif" alt="">
         </div>
      </section>
      <section>
         <h3>参考css属性:</h3>
         <div class="code">
            <a target=_blank href="https://www.runoob.com/cssref/sel-hover.html">:hover</a>
            <a target=_blank href="https://www.runoob.com/cssref/css3-pr-animation.html">animation</a>
            <a target=_blank href="https://www.runoob.com/cssref/css3-pr-transform.html">transform</a>
            <a target=_blank href="https://www.runoob.com/cssref/css3-pr-transition.html">transition</a>
         </div>
      </section>
   </main>
   <script type="text/javascript">
      class Scene {
           constructor() {
               this.elements = []
               this.context = null
               this.update()
           }
           update() {
               requestAnimationFrame( () => {
                   if( this.context ) {
                       this.context.clearRect(0,0, 1920, 1080)
                   }
                   this.elements.forEach( (item) => {
                       if( item.update ) {
                           item.update()
                       }
                       if( item.draw ) {
                           item.draw()
                       }
                   } )
                   this.update();
               } )
           }
      }
      class Partical {
           constructor(x = 0, y = 0) {
               this.position = {
                   x: x,
                   y: y,
               }
               this.speed = {
                   x: 1,
                   y: 1,
               }
               this.context = null
               this.color = {
                   r: 0,
                   g: 0,
                   b: 0,
                   a: 0,
               }
           }
           update() {
               this.position.x = this.position.x + this.speed.x
               this.position.y = this.position.y + this.speed.y
               this.speed.x = rand(-10, 10) / 10
               this.speed.y = rand(-10, 10) / 10
               this.color.r += rand(-10, 10)
               this.color.g += rand(-10, 10)
               this.color.b += rand(-10, 10)
               this.color.a += rand(-10, 10) / 1000
               if(this.color.r < 0) {
                   this.color.r = 0
               }
               if(this.color.r > 255) {
                   this.color.r = 255
               }
               if(this.color.b < 0) {
                   this.color.b = 0
               }
               if(this.color.b > 255) {
                   this.color.b = 255
               }
               if(this.color.g < 0) {
                   this.color.g = 0
               }
               if(this.color.g > 255) {
                   this.color.g = 255
               }
               if(this.color.a < 0) {
                   this.color.g = 0
               }
               if(this.color.a > 1) {
                   this.color.a = 1
               }
           }
           draw() {
               if( this.context ) {
                   var ctx = this.context
                   ctx.beginPath()
                   ctx.arc(this.position.x, this.position.y, 20, 0, Math.PI * 2)
                   ctx.fillStyle = `rgba(${this.color.r}, ${this.color.g}, ${this.color.b}, ${this.color.a})`
                   ctx.fill()
               }
           }
      }
      const e = sel => document.querySelector(sel);
      const es = sel => document.querySelectorAll(sel);
      const log = console.log.bind(console)
      const __main = function() {
           let canvas = e("#canvas")
           canvas.width = window.innerWidth
           canvas.height = window.innerHeight
           let scene = new Scene()
           scene.context = canvas.getContext("2d")

           for(let i = 0; i < 100; i++) {
               let p = new Partical()
               p.position.x = rand(0, canvas.width)
               p.position.y = rand(0, canvas.height)
               p.context = canvas.getContext("2d")
               scene.elements.push(p)
           }


      }
      __main();


      var color = {
         r: 88,
         g: 88,
         b: 88,
         a: 1,
      }

      update()


      function rand(min, max) {
          return min + Math.floor( Math.random() * ( max - min + 1 ) )
      }
      function update() {
          requestAnimationFrame( () => {
             var r = rand(-10, 10) / 4
             var g = rand(-10, 10) / 4
             var b = rand(-10, 10) / 4

            color.r += r
            color.g += g
            color.b += b

            if(color.r < 0) {
               color.r = 0
            }
            if(color.g < 0) {
               color.g = 0
            }
            if(color.b < 0) {
               color.b = 0
            }
            if(color.a < 0.2) {
               color.a = 0.2
            }

            if(color.r > 255) {
               color.r = 255
            }
            if(color.g > 255) {
               color.g = 255
            }
            if(color.b > 255) {
               color.b = 255
            }
            if(color.a > 1) {
               color.a = 1
            }

            e("html").style.setProperty("--text-color", `rgba(${color.r}, ${color.g}, ${color.b}, ${color.a})`)
            update();
          } )
      }
   </script>
</body>
</html>
